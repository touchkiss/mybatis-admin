<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <link rel="shortcut icon" href="/img/favicon.ico"/>
    <title th:text="${registerInfo.showName}"></title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/plugins/dataTables/DataTables-1.10.18/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="/plugins/dataTables/Buttons-1.5.6/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="/plugins/dataTables/ColReorder-1.5.0/css/colReorder.dataTables.min.css">
    <link rel="stylesheet" href="/plugins/dataTables/FixedHeader-3.1.4/css/fixedHeader.dataTables.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/bower_components/font-awesome/css/font-awesome.min.css"/>
    <!-- Ionicons -->
    <link rel="stylesheet" href="/bower_components/Ionicons/css/ionicons.min.css"/>
    <link rel="stylesheet" href="/bower_components/select2/dist/css/select2.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/css/AdminLTE.min.css"/>
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="/css/skins/_all-skins.min.css"/>
    <!-- Morris chart -->
    <link rel="stylesheet" href="/bower_components/morris.js/morris.css"/>
    <!-- jvectormap -->
    <link rel="stylesheet" href="/bower_components/jvectormap/jquery-jvectormap.css"/>
    <!-- Date Picker -->
    <link rel="stylesheet" href="/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css"/>
    <link rel="stylesheet" href="/plugins/timepicker/bootstrap-timepicker.min.css"/>
    <link rel="stylesheet"
          href="/bower_components/bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.min.css">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css"/>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Google Font -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    <style>
        ul.dropdown-menu li .input-group span.input-group-addon {
            width: 40px;
        }

        table tbody tr td .fa {
            font-size: 20px;
        }
    </style>
</head>
<body class="hold-transition skin-blue sidebar-mini fixed">
<div class="wrapper">
    <div th:include="admin/header::header"/>
    <div th:include="admin/menu::menu"/>
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1 th:text="${registerInfo.showName}"></h1>
            <ol class="breadcrumb">
                <li><a href="/admin"><i class="fa fa-dashboard"></i> 首页</a></li>
                <li><a href="#" th:text="${registerInfo.groupShowName}"></a></li>
                <li class="active" th:text="${registerInfo.showName}"></li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="content">
            <th:block th:if="${processResult != null and processResult.status==processResult.PROCESS_SUCCEEE}">
                <div class="alert alert-success alert-dismissible" id="alertTip">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                    <h4><i class="icon fa fa-check"></i> 提示</h4>
                    <b th:text="${processResult.message}"></b>
                </div>
            </th:block>
            <th:block th:if="${processResult != null and processResult.status==processResult.PROCESS_FAILED}">
                <div class="alert alert-warning alert-dismissible" id="alertTip">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                    <h4><i class="icon fa fa-warning"></i> 提示</h4>
                    <b th:text="${processResult.message}"></b>
                </div>
            </th:block>
            <div class="box">
                <div class="box-header with-border">
                    <h3 class="box-title">搜索与过滤条件</h3>

                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip"
                                title="" data-original-title="Collapse">
                            <i class="fa fa-minus"></i></button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip"
                                title="" data-original-title="Remove">
                            <i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body" id="searchBox">
                    <th:block
                            th:each="filter:${registerInfo.beanInfo.filterFields}">

                        <div class="input-group col-xs-3 col-md-3 form-group col-sm-6"
                             th:if="'java.lang.Boolean' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType} or ${foreignInfoMap != null and foreignInfoMap.containsKey(registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyName)}"
                             style="float: left;padding-right: 15px">
                            <div class="input-group-addon"
                                 th:text="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"></div>
                            <th:block
                                    th:if="${foreignInfoMap != null and foreignInfoMap.containsKey(registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyName)}">
                                <select class="form-control select2" multiple="multiple"
                                        th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'">
                                    <option value="">全部</option>
                                    <option th:each="option:${foreignInfoMap.get(registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyName)}"
                                            th:value="${option.value}" th:text="${option.text}"></option>
                                </select>
                            </th:block>
                            <th:block
                                    th:unless="${foreignInfoMap !=null and foreignInfoMap.containsKey(registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyName)}">
                                <select class="form-control"
                                        th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'">
                                    <option value="">全部</option>
                                    <option value="1">true</option>
                                    <option value="0">false</option>
                                </select>
                            </th:block>
                        </div>
                        <div class="input-group col-xs-3 col-md-3 form-group col-sm-6"
                             th:unless="'java.lang.Boolean' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType} or ${foreignInfoMap != null and foreignInfoMap.containsKey(registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyName)}"
                             style="float: left;padding-right: 15px">
                            <div class="input-group-addon"
                                 th:text="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"></div>
                            <div class="input-group-btn">
                                <th:block
                                        th:if="'java.lang.Integer' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType} or 'java.lang.Long' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType} or 'java.lang.Double' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType} or 'java.lang.Byte' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType}">
                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false">
                                        <span>=</span>
                                        <span class="sr-only"></span>
                                    </button>
                                    <ul class="dropdown-menu" style="width: 200px">
                                        <li>
                                            <div class="input-group">
                                                <span class="input-group-addon">&lt;</span>
                                                <input type="text" class="form-control"
                                                       title="小于"
                                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                       th:attr="name='_p_'+${filter}+'_lt',id='_p_'+${filter}+'_lt'">
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                        <li role="separator" class="divider"></li>
                                        <li>
                                            <div class="input-group input-group">
                                                <span class="input-group-addon">&gt;</span>
                                                <input type="text" class="form-control"
                                                       title="大于"
                                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                       th:attr="name='_p_'+${filter}+'_gt',id='_p_'+${filter}+'_gt'">
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                        <li role="separator" class="divider"></li>
                                        <li>
                                            <div class="input-group input-group">
                                                <span class="input-group-addon">!=</span>
                                                <input type="text" class="form-control"
                                                       title="不等于"
                                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                       th:attr="name='_p_'+${filter}+'_ne',id='_p_'+${filter}+'_ne'">
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                        <li role="separator" class="divider"></li>
                                        <li>
                                            <div class="input-group input-group">
                                                <span class="input-group-addon">re</span>
                                                <input type="text" class="form-control re"
                                                       title="正则表达式"
                                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                       th:attr="name='_p_'+${filter}+'_re',id='_p_'+${filter}+'_re'">
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                    </ul>
                                </th:block>
                                <th:block
                                        th:if="'java.util.Date' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType}">
                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false">
                                        <span>=&nbsp;<span class="badge" style="display: none">0</span></span>
                                        <span class="sr-only"></span>
                                    </button>
                                    <ul class="dropdown-menu" style="width: 200px">
                                        <li>
                                            <div class="input-group">
                                                <span class="input-group-addon" title="小于">&lt;</span>
                                                <th:block
                                                        th:switch="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).jdbctype}">
                                                    <input th:case="'DATE'" type="text"
                                                           class="form-control datepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_lt',id='_p_'+${filter}+'_lt'"/>
                                                    <input th:case="'TIME'" type="text"
                                                           class="form-control timepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_lt',id='_p_'+${filter}+'_lt'"/>
                                                    <input th:case="*" type="text"
                                                           class="form-control datetimepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_lt',id='_p_'+${filter}+'_lt'"/>
                                                </th:block>
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                        <li role="separator" class="divider"></li>
                                        <li>
                                            <div class="input-group input-group">
                                                <span class="input-group-addon" title="大于">&gt;</span>
                                                <th:block
                                                        th:switch="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).jdbctype}">
                                                    <input th:case="'DATE'" type="text"
                                                           class="form-control datepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_gt',id='_p_'+${filter}+'_gt'"/>
                                                    <input th:case="'TIME'" type="text"
                                                           class="form-control timepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_gt',id='_p_'+${filter}+'_gt'"/>
                                                    <input th:case="*" type="text"
                                                           class="form-control datetimepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_gt',id='_p_'+${filter}+'_gt'"/>
                                                </th:block>
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                        <li role="separator" class="divider"></li>
                                        <li>
                                            <div class="input-group input-group">
                                                <span class="input-group-addon" title="不等于">!=</span>
                                                <th:block
                                                        th:switch="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).jdbctype}">
                                                    <input th:case="'DATE'" type="text"
                                                           class="form-control datepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_ne',id='_p_'+${filter}+'_ne'"/>
                                                    <input th:case="'TIME'" type="text"
                                                           class="form-control timepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_ne',id='_p_'+${filter}+'_ne'"/>
                                                    <input th:case="*" type="text"
                                                           class="form-control datetimepicker"
                                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                           th:attr="name='_p_'+${filter}+'_ne',id='_p_'+${filter}+'_ne'"/>
                                                </th:block>
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                    </ul>
                                </th:block>
                                <th:block
                                        th:if="'java.lang.String' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType}">
                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false">
                                        <span>包含<span class="badge" style="display: none">0</span></span>
                                        <span class="sr-only"></span>
                                    </button>
                                    <ul class="dropdown-menu" style="width: 200px">
                                        <li>
                                            <div class="input-group">
                                                <span class="input-group-addon" title="等于">=</span>
                                                <input type="text" class="form-control"
                                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                       th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'">
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                        <li role="separator" class="divider"></li>
                                        <li>
                                            <div class="input-group input-group">
                                                <span class="input-group-addon" title="不等于">!=</span>
                                                <input type="text" class="form-control"
                                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                       th:attr="name='_p_'+${filter}+'_ne',id='_p_'+${filter}+'_ne'">
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                        <li role="separator" class="divider"></li>
                                        <li>
                                            <div class="input-group input-group">
                                                <span class="input-group-addon" title="正则表达式">re</span>
                                                <input type="text" class="form-control re"
                                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                                       th:attr="name='_p_'+${filter}+'_re',id='_p_'+${filter}+'_re'">
                                                <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                            </div>
                                        </li>
                                    </ul>
                                </th:block>
                            </div>
                            <th:block
                                    th:if="${foreignInfoMap !=null and foreignInfoMap.containsKey(registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyName)}">
                                <select class="form-control"
                                        th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'">
                                    <option value="">全部</option>
                                    <option th:each="option:${foreignInfoMap.get(registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyName)}"
                                            th:value="${option.value}" th:text="${option.text}"></option>
                                </select>
                            </th:block>
                            <th:block
                                    th:unless="${foreignInfoMap !=null and foreignInfoMap.containsKey(registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyName)}">
                                <!--<input th:if="'java.util.Date' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType}"-->
                                <!--type="text"-->
                                <!--th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"-->
                                <!--th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'"-->
                                <!--class="form-control datetimepicker"-->
                                <!--aria-label="Text input with segmented button dropdown"/>-->
                                <th:block
                                        th:if="'java.util.Date' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType}"
                                        th:switch="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).jdbctype}">
                                    <input th:case="'DATE'" type="text"
                                           class="form-control datepicker"
                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                           th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'"
                                           aria-label="Text input with segmented button dropdown"/>
                                    <input th:case="'TIME'" type="text"
                                           class="form-control timepicker"
                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                           th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'"
                                           aria-label="Text input with segmented button dropdown"/>
                                    <input th:case="*" type="text"
                                           class="form-control datetimepicker"
                                           th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                           th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'"
                                           aria-label="Text input with segmented button dropdown">
                                </th:block>
                                <input th:if="'java.lang.String' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType}"
                                       type="text"
                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                       th:attr="name='_p_'+${filter}+'_cn',id='_p_'+${filter}+'_cn'"
                                       class="form-control" aria-label="Text input with segmented button dropdown"/>
                                <input th:unless="'java.lang.String' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType} or 'java.util.Date' eq ${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyType}"
                                       type="text"
                                       th:placeholder="${registerInfo.beanInfo.beanPropertyInfoMap.get(filter).propertyShowName}"
                                       th:attr="name='_p_'+${filter}+'_eq',id='_p_'+${filter}+'_eq'"
                                       class="form-control" aria-label="Text input with segmented button dropdown"/>
                                <span class="input-group-btn clear" title="清空" disabled="true">
                                    <button class="btn btn-default" type="button">X</button>
                                </span>
                            </th:block>
                        </div>
                    </th:block>
                    <div class="input-group col-xs-3 col-md-3 form-group col-sm-6"
                         style="float: left;padding-right: 15px">
                        <div class="input-group-addon">全部字段</div>
                        <div class="input-group-btn">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <span>包含</span>
                                <span class="sr-only"></span>
                            </button>
                            <ul class="dropdown-menu" style="width: 200px">
                                <li>
                                    <div class="input-group">
                                        <span class="input-group-addon" title="等于">=</span>
                                        <input type="text" class="form-control" placeholder="全部字段" name="_q_eq"
                                               id="_q_eq">
                                        <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                    </div>
                                </li>
                                <li role="separator" class="divider"></li>
                                <li>
                                    <div class="input-group input-group">
                                        <span class="input-group-addon" title="不等于">!=</span>
                                        <input type="text" class="form-control" placeholder="全部字段" name="_q_ne"
                                               id="_q_ne">
                                        <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                    </div>
                                </li>
                                <li role="separator" class="divider"></li>
                                <li>
                                    <div class="input-group input-group">
                                        <span class="input-group-addon" title="正则表达式">re</span>
                                        <input type="text" class="form-control re" placeholder="全部字段" name="_q_re"
                                               id="_q_re">
                                        <span class="input-group-btn clear" title="清空" disabled="true">
                                                    <button class="btn btn-default" type="button">X</button>
                                                </span>
                                    </div>
                                </li>
                            </ul>

                        </div>

                        <input type="text" placeholder="全部字段" class="form-control"
                               aria-label="Text input with segmented button dropdown" name="_q_cn" id="_q_cn">
                        <span class="input-group-btn clear" title="清空" disabled="true">
                            <button class="btn btn-default" type="button">X</button>
                        </span>
                    </div>
                </div>
                <div class="box-footer">
                    <button type="button" id="query" class="btn btn-primary"><i class="fa fa-search"></i>&nbsp;搜索
                    </button>
                    &nbsp;&nbsp;&nbsp;
                    <a type="button" class="btn btn-primary"
                       th:attr="href='/admin/'+${group}+'/'+${name}+'/add'"><i class="fa fa-plus"></i>&nbsp;添加</a>
                    &nbsp;&nbsp;&nbsp;
                    <button type="button" id="multiDelete" class="btn btn-danger"><i class="fa fa-trash"></i>&nbsp;批量删除
                    </button>
                </div>
            </div>
            <!-- Default box -->
            <div class="box">
                <div class="box-header with-border">
                    <h3 class="box-title" th:text="${registerInfo.showName}"></h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip"
                                title="" data-original-title="Collapse">
                            <i class="fa fa-minus"></i></button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip"
                                title="" data-original-title="Remove">
                            <i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="dataTables_wrapper form-inline dt-bootstrap" style="overflow: auto;">
                        <div class="row">
                            <div class="col-sm-12">
                                <table id="table"
                                       class="table table-bordered table-striped table-hover dataTable">
                                    <thead>
                                    <tr>
                                        <th style="width: 15px;"><input type="checkbox" id="checkAll"
                                                                        style="display: block;"/></th>
                                        <th th:each="field:${registerInfo.beanInfo.showFields}"
                                            th:text="${registerInfo.beanInfo.beanPropertyInfoMap.get(field).propertyShowName}"></th>
                                        <th>操作</th>
                                    </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.box-footer-->
            </div>
            <!-- /.box -->

        </section>
        <!-- /.content -->
    </div>
    <div th:include="admin/footer::footer"></div>
    <div th:include="admin/aside::aside"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 3 -->
<script src="/bower_components/jquery/dist/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="/bower_components/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
    $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Morris.js charts -->
<script src="/bower_components/raphael/raphael.min.js"></script>
<script src="/bower_components/morris.js/morris.min.js"></script>
<!-- Sparkline -->
<script src="/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script src="/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- jQuery Knob Chart -->
<script src="/bower_components/jquery-knob/dist/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="/bower_components/moment/min/moment.min.js"></script>
<!-- datepicker -->
<script src="/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
<script src="/plugins/timepicker/bootstrap-timepicker.min.js"></script>
<script src="/bower_components/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.min.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<!-- Slimscroll -->
<script src="/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="/plugins/dataTables/DataTables-1.10.18/js/jquery.dataTables.min.js"></script>
<script src="/plugins/dataTables/Buttons-1.5.6/js/dataTables.buttons.min.js"></script>
<script src="/plugins/dataTables/ColReorder-1.5.0/js/dataTables.colReorder.min.js"></script>
<script src="/plugins/dataTables/FixedHeader-3.1.4/js/dataTables.fixedHeader.min.js"></script>
<script src="/bower_components/select2/dist/js/select2.full.min.js"></script>
<script src="/js/adminlte.min.js"></script>
<script src="/js/demo.js"></script>
<!-- AdminLTE for demo purposes -->
<script th:inline="javascript">
    /* <![CDATA[*/
    var selectAll = false;
    var showFields = [[${registerInfo.beanInfo.showFields}]];
    var cols = new Array();
    var idColumnList = [[${registerInfo.beanInfo.idColumnList}]];

    $(function () {
        cols.push({
            "data": null,
            "defaultContent": "",
            "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
                var checkbox = $("<input/>").attr("type", "checkbox").css("display", "block").attr("data-id", getIdColumnNames(sData));
                $(nTd).empty().append(checkbox);
            }
        });
        $.each(showFields, function (i, field) {
            cols.push({
                "data": field,
                "defaultContent": ""
            });
        });
        cols.push({
            "data": null,
            "defaultContent": "",
            "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
                $(nTd).empty();
                var updateBtn = $("<a></a>").attr("href", "/admin/" + [[${group}]] + "/" + [[${name}]] + "/" + getIdColumnNames(sData) + "/update").addClass("fa").addClass("fa-pencil").attr("title", "编辑").appendTo($(nTd));
                $(nTd).append("&nbsp;").append("&nbsp;");
                var deleteBtn = $("<a></a>").attr("href", "#").click(function () {
                    deleteItem("/admin/" + [[${group}]] + "/" + [[${name}]] + "/" + getIdColumnNames(sData) + "/delete");
                }).addClass("fa").addClass("fa-trash").attr("title", "删除").appendTo($(nTd));
            }
        });
        $(".input-group-btn.clear").click(function () {
            $(this).prev("input").val("");
        });
        //Datetime picker
        $('.datetimepicker').datetimepicker({
            autoclose: true,
            timePicker: false,
            minuteStep: 5,
            format: 'yyyy-mm-dd hh:ii:ss',
            todayBtn: 'linked',
            todayHighlight: true,
            language: 'zh-CN'
        });
        //Date picker
        $('.datepicker').datepicker({
            autoclose: true,
            timePicker: false,
            minuteStep: 5,
            format: 'yyyy-mm-dd',
            todayBtn: 'linked',
            todayHighlight: true,
            language: 'zh-CN'
        });
        //Time picker
        $('.timepicker').timepicker({
            defaultTime: false,
            autoclose: true,
            timePicker: false,
            minuteStep: 5,
            showSeconds: true,
            showMeridian: false,
            language: 'zh-CN'
        });
        $("#addItem").click(function () {
            window.location.href = '/admin/' + [[${group}]] + '/' + [[${name}]] + '/add';
        });

        setMenuActive();

        if ($("#alertTip").length > 0) {
            window.history.pushState({}, 0, '/admin/' + [[${group}]] + '/' + [[${name}]]);
        }

        $.each($("#searchBox input[type=text]"), function (index, input) {
            var id = $(input).attr("id");
            if (id && id != '') {
                getUrlParams(id);
            }
        });
        $.each($("#searchBox select"), function (index, select) {
            var id = $(select).attr("id");
            var value = getQueryString(id);
            if (value && value.length > 0) {
                var values = value.split("^");
                if (values && values.length > 0) {
                    $.each(values, function (i, va) {
                        $(select).find("option[value=" + va + "]").attr("selected", true);
                    });
                }
                // $(select).val(value);
            }
        });

        $('.select2').select2();

        var lengthMenu1 = [10, 20, 50, 100, -1], lengthMenu2 = [10, 20, 50, 100, '全部'];

        var table = $("#table").DataTable({
            "dom": 'ClBfrtip',
            "buttons": [
                'copy', 'excel', 'pdf', 'csv'
            ],
            "fixedHeader": {
                "headerOffset": $(".navbar").height()
            },
            "colReorder": true,
            "pageLength": 10,
            "lengthMenu": [lengthMenu1, lengthMenu2],
            "processing": true,
            "serverSide": true,
            "searching": false,
            "ajax": {
                "url": "/admin/" + [[${group}]] + "/" + [[${name}]],
                "type": "post",
                "data": function (d) {
                    href = window.location.href;
                    if (href.indexOf("?") > -1) {
                        href = href.substring(0, href.indexOf("?"));
                    }
                    var n = 0;
                    $.each($("#searchBox input[type=text]"), function (index, input) {
                        var value = $(input).val();
                        if (!$(input).hasClass("datetimepicker")) {
                            value = getQueryValue(value);
                        }
                        if (value && value != '') {
                            if (n == 0) {
                                href += "?";
                            } else if (n > 0) {
                                href += "&";
                            }
                            d[$(input).attr("id")] = value;
                            n++;
                            href += $(input).attr("id") + '=' + encodeURI(value);
                        }
                    });
                    $.each($("#searchBox select"), function (index, select) {
                        var selectedOptions = $(select).find("option:selected");
                        var values = new Array();
                        $.each(selectedOptions, function (i, option) {
                            var ov = $(option).attr("value");
                            if (ov && ov.length > 0) {
                                values.push(ov);
                            }
                        });
                        if (values.length > 0) {
                            if (n == 0) {
                                href += "?";
                            } else if (n > 0) {
                                href += "&";
                            }
                            d[$(select).attr("id")] = values.join("^");
                            n++;
                            href += $(select).attr("id") + '=' + values.join("%5e");
                        }
                    });
                    window.history.pushState({}, 0, href);
                }
            },
            "columns": cols,
            "aoColumnDefs": [
                {
                    "bSortable": false,
                    "aTargets": [0, cols.length - 1]
                }
            ],
            "language": {
                "url": "/js/Chinese.json"
            },
            "pageLength": 10
        });

        $("#query").click(function () {
            $("#table").DataTable().ajax.reload();
        });
        $("#checkAll").change(function () {
            toggleSelectAll();
        });
        $("#multiDelete").click(function () {
            multiDelete();
        });

    });

    function deleteItem(url) {
        if (confirm("真的要删除吗？")) {
            window.location.href = url;
        }
    }

    function setMenuActive() {
        pathname = window.location.pathname;
        var a = $("a[href='" + pathname + "']");
        $(a).parent("li").addClass("active");
        $(a).parent("li").parent("ul").parent("li").addClass("active").addClass("menu-open");
    }

    function trimValue(originValue) {
        if (originValue && originValue != '' && originValue.replace(/(^s*)|(s*$)/g, "").length > 0) {
            return originValue.trim();
        }
        return '';
    }

    function getQueryValue(originValue) {
        originValue = trimValue(originValue)
        if (originValue.length > 0) {
            while (originValue.indexOf("+") > -1 || originValue.indexOf("^") > -1) {
                originValue = originValue.replace("+", "%2b");
                originValue = originValue.replace("^", "%5e");
            }
            while (originValue != originValue.replace(/(\s+or\s+)/, "^")) {
                originValue = originValue.replace(/(\s+or\s+)/, "^");
            }
            while (originValue != originValue.replace(/(\s+)/, "+")) {
                originValue = originValue.replace(/(\s+)/, "+");
            }
            return originValue;
        }
        return "";
    }

    function toggleSelectAll() {
        selectAll = !selectAll;
        var trs = $("#table tbody tr");
        if (trs && trs.length > 0) {
            $.each(trs, function (i, tr) {
                var td = $(tr).find("td:first");
                var checkbox = $(td).find("input[type=checkbox]");
                $(checkbox).prop("checked", selectAll);
            });
        }
    }

    function multiDelete() {
        var trs = $("#table tbody tr");
        if (trs && trs.length > 0) {
            var idList = new Array();
            $.each(trs, function (i, tr) {
                var td = $(tr).find("td:first");
                var checkbox = $(td).find("input[type=checkbox]");
                if ($(checkbox).is(':checked')) {
                    var id = $(checkbox).data("id");
                    idList.push(id);
                }
            })
            if (idList.length > 0) {
                if (confirm("真的要删除" + idList.length + "条信息吗？")) {
                    window.location.href = "/admin/" + [[${group}]] + "/" + [[${name}]] + "/multiDelete/" + idList.join(",,");
                }
            } else {
                alert("未选择任何信息");
            }
        }
    }

    function getUrlParams(paramname) {
        var value = getQueryString(paramname);
        if (value && value.length > 0) {
            while (value.indexOf("+") > -1) {
                value = value.replace("+", " ");
            }
            while (value.indexOf("%2b") > -1) {
                value = value.replace("%2b", "+");
            }
            // while (value.indexOf("%5e") > -1) {
            //     value = value.replace("%5e", " or ");
            // }
            while (value.indexOf("^") > -1) {
                value = value.replace("^", " or ");
            }
            $("#" + paramname).val(value);
        }
    }

    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return decodeURI(r[2]);
        return null;
    }

    function getIdColumnNames(sData) {
        if (idColumnList && idColumnList.length > 0) {
            var idnames = new Array();
            $.each(idColumnList, function (i, id) {
                idnames.push(sData[id]);
            });
            return idnames.join(',');
        }
        alert("该表没有主键，不予处理");
        return ''
    }

    /* ]]>*/
</script>
</body>
</html>